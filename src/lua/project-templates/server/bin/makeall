#! /bin/bash
--[[BLOCK_START:API_NAME]]
./bin/apigen #{API_NAME} update_handlers
./bin/apigen #{API_NAME} generate_documents
sudo luarocks make www/#{API_NAME}/rockspec/#{PROJECT_NAME}.#{API_NAME}-scm-1.rockspec
sudo luarocks make cluster/localhost-vf/rockspec/#{PROJECT_NAME}.nginx.#{API_NAME}.localhost-vf-scm-1.rockspec
--[[BLOCK_END:API_NAME]]
--[[BLOCK_START:JOINED_WSAPI]]
./bin/apigen #{JOINED_WSAPI} update_handlers
./bin/apigen #{JOINED_WSAPI} generate_documents
sudo luarocks make www/#{JOINED_WSAPI}/rockspec/#{PROJECT_NAME}.#{JOINED_WSAPI}-scm-1.rockspec
sudo luarocks make cluster/localhost-vf/rockspec/#{PROJECT_NAME}.nginx.#{JOINED_WSAPI}.localhost-vf-scm-1.rockspec
--[[BLOCK_END:JOINED_WSAPI]]
sudo luarocks make cluster/localhost-vf/internal-config/rockspec/#{PROJECT_NAME}.internal-config.localhost-vf-scm-1.rockspec
sudo luarocks make rockspec/#{PROJECT_NAME}.lib-scm-1.rockspec
sudo killall multiwatch ; sudo killall luajit2 
